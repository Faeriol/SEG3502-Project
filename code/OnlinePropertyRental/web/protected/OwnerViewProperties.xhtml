<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <body>

        <ui:composition template="./ownerTemplate.xhtml">
            
            <ui:define name="content">
                
                
                <h:form prependId="false">
                    
                    <c:set target="#{account}" property="userName" value="#{sessionScope.User.ACCOUNT.USER_NAME}" />
                    <h:commandButton value="Lookup" type="command" actionListener="#{system.findOwnedProperty()}">
                        <f:ajax execute="" render="results"/>
                    </h:commandButton>

                    <h:panelGroup id="results">
                        <h:dataTable rendered="#{property.showResults}" border="2" bgcolor="yellow" id="resultTable" value="#{property.lookupResults}" var="prop"> >
                            <h:column>
                                <f:facet name="header">Property Id</f:facet>
                                #{prop.PROPERTY_ID}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Numero Rue</f:facet>
                                #{prop.ADDRESS.NUMERO_RUE}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Numero Unite</f:facet>
                                #{prop.ADDRESS.NUMERO_UNITE}
                            </h:column><h:column>
                                <f:facet name="header">Nom Rue</f:facet>
                                #{prop.ADDRESS.NOM_RUE}
                            </h:column>
                            <h:column>
                                <f:facet name="header">NB Bedrooms</f:facet>
                                #{prop.NB_BEDROOMS}
                            </h:column>
                            <h:column>
                                <f:facet name="header">NB Bathrooms</f:facet>
                                #{prop.NB_BATHROOMS}
                            </h:column>
                            <h:column>
                                <f:facet name="header">NB Other rooms</f:facet>
                                #{prop.NB_OTHERS}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Rent</f:facet>
                                #{prop.RENT}
                            </h:column>                   
                        </h:dataTable>
                    </h:panelGroup>
                </h:form>
            </ui:define>
            

        </ui:composition>

    </body>
</html>
